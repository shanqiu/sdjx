"use strict";angular.module("com.2fdevs.videogular.plugins.controls",[]).directive("vgControls",["$timeout","VG_STATES",function(a){return{restrict:"E",require:"^videogular",transclude:!0,template:'<div id="controls-container" ng-class="animationClass" ng-transclude></div>',scope:{autoHide:"=vgAutohide",autoHideTime:"=vgAutohideTime"},link:function(b,c,d,e){function f(){h(),b.$apply()}function g(){b.animationClass="hide-animation"}function h(){b.animationClass="show-animation",a.cancel(i),b.autoHide&&(i=a(g,j))}var i,j=2e3;void 0!=b.autoHide&&b.$watch("autoHide",function(c){c?(b.animationClass="hide-animation",e.videogularElement.bind("mousemove",f)):(b.animationClass="",a.cancel(i),e.videogularElement.unbind("mousemove",f),h())}),void 0!=b.autoHideTime&&b.$watch("autoHideTime",function(a){j=a})}}}]).directive("vgPlayPauseButton",["VG_STATES",function(a){return{restrict:"E",require:"^videogular",template:"<div class='iconButton' ng-class='playPauseIcon'></div>",link:function(b,c,d,e){function f(c){switch(c){case a.PLAY:b.playPauseIcon={pause:!0};break;case a.PAUSE:b.playPauseIcon={play:!0};break;case a.STOP:b.playPauseIcon={play:!0}}}function g(){e.playPause(),b.$apply()}b.playPauseIcon={play:!0},b.$watch(function(){return e.currentState},function(a,b){a!=b&&f(a)}),c.bind("click",g)}}}]).directive("vgTimedisplay",[function(){return{require:"^videogular",restrict:"E",link:function(a,b,c,d){a.$watch(function(){return d.currentTime},function(b,c){b!=c&&(a.currentTime=b)}),a.$watch(function(){return d.timeLeft},function(b,c){b!=c&&(a.timeLeft=b)}),a.$watch(function(){return d.totalTime},function(b,c){b!=c&&(a.totalTime=b)})}}}]).directive("vgScrubbar",["VG_STATES","VG_UTILS",function(a,b){return{restrict:"AE",require:"^videogular",replace:!0,link:function(c,d,e,f){function g(a){var e,g=a.originalEvent.touches;t=b.isiOSDevice()?-1*(g[0].clientX-a.originalEvent.layerX):a.originalEvent.layerX,e=g[0].clientX+t-g[0].target.offsetLeft,q=!0,r&&(s=!0),f.pause(),o(e*f.videoElement[0].duration/d[0].scrollWidth),c.$apply()}function h(){s&&(s=!1,f.play()),q=!1,c.$apply()}function i(a){var b,e=a.originalEvent.touches;q&&(b=e[0].clientX+t-e[0].target.offsetLeft,o(b*f.videoElement[0].duration/d[0].scrollWidth)),c.$apply()}function j(){q=!1,c.$apply()}function k(a){a=b.fixEventOffset(a),q=!0,r&&(s=!0),f.pause(),o(a.offsetX*f.videoElement[0].duration/d[0].scrollWidth),c.$apply()}function l(a){a=b.fixEventOffset(a),s&&(s=!1,f.play()),q=!1,o(a.offsetX*f.videoElement[0].duration/d[0].scrollWidth),c.$apply()}function m(a){q&&(a=b.fixEventOffset(a),o(a.offsetX*f.videoElement[0].duration/d[0].scrollWidth)),c.$apply()}function n(){q=!1,c.$apply()}function o(a){f.seekTime(a,!1)}function p(b){if(!q)switch(b){case a.PLAY:r=!0;break;case a.PAUSE:r=!1;break;case a.STOP:r=!1}}var q=!1,r=!1,s=!1,t=0;c.$watch(function(){return f.currentState},function(a,b){a!=b&&p(a)}),b.isMobileDevice()?(d.bind("touchstart",g),d.bind("touchend",h),d.bind("touchmove",i),d.bind("touchleave",j)):(d.bind("mousedown",k),d.bind("mouseup",l),d.bind("mousemove",m),d.bind("mouseleave",n))}}}]).directive("vgScrubbarcurrenttime",[function(){return{restrict:"E",require:"^videogular",link:function(a,b,c,d){function e(a){a&&d.totalTime&&(g=-1*a.getTime()/1e3*100/(-1*d.totalTime.getTime()/1e3),b.css("width",g+"%"))}function f(){g=0,b.css("width",g+"%")}var g=0;a.$watch(function(){return d.currentTime},function(a){e(a)}),a.$watch(function(){return d.isCompleted},function(a){f(a)})}}}]).directive("vgVolume",["VG_UTILS",function(a){return{restrict:"E",link:function(b,c){function d(){b.volumeVisibility="visible",b.$apply()}function e(){b.volumeVisibility="hidden",b.$apply()}a.isMobileDevice()?c.css("display","none"):(b.volumeVisibility="hidden",c.bind("mouseover",d),c.bind("mouseleave",e))}}}]).directive("vgVolumebar",["VG_UTILS",function(a){return{restrict:"E",require:"^videogular",template:"<div class='verticalVolumeBar'><div class='volumeBackground'><div class='volumeValue'></div><div class='volumeClickArea'></div></div></div>",link:function(b,c,d,e){function f(c){c=a.fixEventOffset(c);var d=parseInt(o.prop("offsetHeight")),f=100*c.offsetY/d,g=1-f/100;k(100*g),e.setVolume(g),b.$apply()}function g(){n=!0}function h(){n=!1}function i(){n=!1}function j(c){if(n){c=a.fixEventOffset(c);var d=parseInt(o.prop("offsetHeight")),f=100*c.offsetY/d,g=1-f/100;k(100*g),e.setVolume(g),b.$apply()}}function k(a){p.css("height",a+"%"),p.css("top",100-a+"%")}function l(a){k(100*a)}function m(a){c.css("visibility",a)}var n=!1,o=angular.element(c[0].getElementsByClassName("volumeBackground")),p=angular.element(c[0].getElementsByClassName("volumeValue"));c.css("visibility",b.volumeVisibility),b.$watch("volumeVisibility",m),o.bind("click",f),o.bind("mousedown",g),o.bind("mouseup",h),o.bind("mousemove",j),o.bind("mouseleave",i),b.$watch(function(){return e.volume},function(a,b){a!=b&&l(a)})}}}]).directive("vgMutebutton",[function(){return{restrict:"E",require:"^videogular",template:"<div class='iconButton' ng-class='muteIcon'></div>",link:function(a,b,c,d){function e(){g?a.currentVolume=a.defaultVolume:(a.currentVolume=0,a.muteIcon={mute:!0}),g=!g,d.setVolume(a.currentVolume),a.$apply()}function f(b){a.currentVolume=b,g?b>0&&(a.defaultVolume=b):a.defaultVolume=b;var c=Math.round(100*b);0==c?a.muteIcon={mute:!0}:c>0&&25>c?a.muteIcon={level0:!0}:c>=25&&50>c?a.muteIcon={level1:!0}:c>=50&&75>c?a.muteIcon={level2:!0}:c>=75&&(a.muteIcon={level3:!0})}var g=!1;a.defaultVolume=1,a.currentVolume=a.defaultVolume,a.muteIcon={level3:!0},b.bind("click",e),a.$watch(function(){return d.volume},function(a,b){a!=b&&f(a)})}}}]).directive("vgFullscreenbutton",[function(){return{restrict:"AE",require:"^videogular",scope:{vgEnterFullScreenIcon:"=",vgExitFullScreenIcon:"="},template:"<div class='iconButton' ng-class='fullscreenIcon'></div>",link:function(a,b,c,d){function e(b){var c;c=b?{exit:b}:{enter:b},a.fullscreenIcon=c}function f(){d.toggleFullScreen(),a.$apply()}b.bind("click",f),a.fullscreenIcon={exit:!1},a.fullscreenIcon={enter:!0},a.$watch(function(){return d.isFullScreen},function(a,b){a!=b&&e(a)})}}}]);